(window.webpackJsonp=window.webpackJsonp||[]).push([[24],{622:function(e,t,n){"use strict";n.r(t);var r=n(465),o=n(446),l=n(498),y=n(444),d=n(515),m=n(502),c=n(447),f=n(611),T=n(189),v=n(497),k=n(19),w=(n(95),n(11),n(58),n(59),n(62),n(65),n(298),n(299),n(22),n(74),n(75),n(134)),x={name:"StakedLands",data:function(){return{forSale:[],staked:[],stakedForSale:[],weaponContract:null,contractId:"0x1522c212757e65e18832183ab8afe7f89b8abe0a",weaponABI:'[{"inputs":[{"internalType":"address","name":"platformAddress_","type":"address"},{"internalType":"string","name":"notRevealURI","type":"string"},{"internalType":"uint16","name":"maxSupply_","type":"uint16"},{"internalType":"address","name":"alphaCitizen","type":"address"},{"internalType":"address","name":"land","type":"address"}],"stateMutability":"nonpayable","type":"constructor"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"approved","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Approval","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":true,"internalType":"address","name":"operator","type":"address"},{"indexed":false,"internalType":"bool","name":"approved","type":"bool"}],"name":"ApprovalForAll","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"string","name":"uri","type":"string"}],"name":"BaseTokenURIUPDATE","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"previousOwner","type":"address"},{"indexed":true,"internalType":"address","name":"newOwner","type":"address"}],"name":"OwnershipTransferred","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"Reveal","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint16[]","name":"tokenIDs","type":"uint16[]"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"StakeWeapon","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"value","type":"bool"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"ToggleClaimWeapon","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"bool","name":"value","type":"bool"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"ToggleStaking","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"address","name":"to","type":"address"},{"indexed":false,"internalType":"uint16[]","name":"citizenIds","type":"uint16[]"},{"indexed":false,"internalType":"uint16[]","name":"landIds","type":"uint16[]"},{"indexed":false,"internalType":"uint256","name":"userMinted","type":"uint256"},{"indexed":false,"internalType":"uint256","name":"totalMinted","type":"uint256"}],"name":"TokenMinted","type":"event"},{"anonymous":false,"inputs":[{"indexed":true,"internalType":"address","name":"from","type":"address"},{"indexed":true,"internalType":"address","name":"to","type":"address"},{"indexed":true,"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"Transfer","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint16[]","name":"tokenIDs","type":"uint16[]"},{"indexed":true,"internalType":"address","name":"owner","type":"address"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"UnstakeWeapon","type":"event"},{"anonymous":false,"inputs":[{"indexed":false,"internalType":"uint16","name":"tokenID","type":"uint16"},{"indexed":true,"internalType":"string","name":"uri","type":"string"},{"indexed":false,"internalType":"uint256","name":"time","type":"uint256"}],"name":"UpdateWeaponURI","type":"event"},{"inputs":[],"name":"_alphaCitizen","outputs":[{"internalType":"contract KryptoriaAlphaCitizensInterface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"_land","outputs":[{"internalType":"contract KryptoriaLandInterface","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"approve","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"}],"name":"balanceOf","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"baseTokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"citizenTokenIds","type":"uint16[]"},{"internalType":"uint16[]","name":"landTokenIds","type":"uint16[]"}],"name":"claimByOwner","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"citizenTokenIds","type":"uint16[]"},{"internalType":"uint16[]","name":"landTokenIds","type":"uint16[]"}],"name":"claimWeapon","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"getApproved","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIds","type":"uint16[]"}],"name":"getCitizenClaimStatus","outputs":[{"internalType":"bool[]","name":"","type":"bool[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIds","type":"uint16[]"}],"name":"getLandClaimStatus","outputs":[{"internalType":"bool[]","name":"","type":"bool[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIDs","type":"uint16[]"}],"name":"getStakingStatus","outputs":[{"components":[{"internalType":"uint16","name":"tokenId","type":"uint16"},{"internalType":"bool","name":"isStaked","type":"bool"},{"internalType":"uint256","name":"current","type":"uint256"},{"internalType":"uint256","name":"total","type":"uint256"}],"internalType":"struct KryptoriaWeapons.StakeDetails[]","name":"","type":"tuple[]"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint16","name":"tokenID","type":"uint16"}],"name":"getStakingTime","outputs":[{"internalType":"bool","name":"isStaked","type":"bool"},{"internalType":"uint256","name":"current","type":"uint256"},{"internalType":"uint256","name":"total","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"address","name":"operator","type":"address"}],"name":"isApprovedForAll","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isClaimActive","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isRevealed","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"isStakingOpen","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"maxSupply","outputs":[{"internalType":"uint16","name":"","type":"uint16"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"name","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"nextOwnerToExplicitlySet","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"notRevealedURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"owner","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"ownerOf","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"platformAddress","outputs":[{"internalType":"address","name":"","type":"address"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"renounceOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"reveal","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenId","type":"uint256"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenID","type":"uint256"},{"internalType":"bytes","name":"_data","type":"bytes"}],"name":"safeTransferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"operator","type":"address"},{"internalType":"bool","name":"approved","type":"bool"}],"name":"setApprovalForAll","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"_baseTokenURI","type":"string"}],"name":"setBaseTokenURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"string","name":"notRevealedURI_","type":"string"}],"name":"setNotRevealedURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"platformAddress_","type":"address"}],"name":"setPlatformAddress","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIDs","type":"uint16[]"}],"name":"stake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"bytes4","name":"interfaceId","type":"bytes4"}],"name":"supportsInterface","outputs":[{"internalType":"bool","name":"","type":"bool"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"symbol","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"toggleClaim","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[],"name":"toggleStaking","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"owner","type":"address"},{"internalType":"uint256","name":"index","type":"uint256"}],"name":"tokenOfOwnerByIndex","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"uint256","name":"tokenID","type":"uint256"}],"name":"tokenURI","outputs":[{"internalType":"string","name":"","type":"string"}],"stateMutability":"view","type":"function"},{"inputs":[],"name":"totalSupply","outputs":[{"internalType":"uint256","name":"","type":"uint256"}],"stateMutability":"view","type":"function"},{"inputs":[{"internalType":"address","name":"from","type":"address"},{"internalType":"address","name":"to","type":"address"},{"internalType":"uint256","name":"tokenID","type":"uint256"}],"name":"transferFrom","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"newOwner","type":"address"}],"name":"transferOwnership","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16[]","name":"tokenIDs","type":"uint16[]"}],"name":"unstake","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"uint16","name":"tokenID","type":"uint16"},{"internalType":"string","name":"uri","type":"string"},{"internalType":"bytes","name":"sig","type":"bytes"}],"name":"updateTokenURI","outputs":[],"stateMutability":"nonpayable","type":"function"},{"inputs":[{"internalType":"address","name":"_owner","type":"address"}],"name":"walletOfOwner","outputs":[{"internalType":"uint256[]","name":"","type":"uint256[]"}],"stateMutability":"view","type":"function"}]',loadingOS:!0,OSpage:0,loadingContract:!0,loadingStakedForSale:!0,ids:[]}},head:function(){return{title:"Staked Weapons"}},mounted:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){var n,i,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(n=[],i=1;i<=1e4;i++)n.push(i);return e.ids=n,r=JSON.parse(e.weaponABI),e.weaponContract=new w.a.Contract(e.contractId,r,e.$wallet.provider),t.next=7,Promise.all([e.getOpenseaInfo(),e.getContractInfo()]);case 7:e.getStakedForSale();case 8:case"end":return t.stop()}}),t)})))()},methods:{getOpenseaInfo:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){var n,r,o,l,y,d,m,i,c,f;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:n=[],r=30,o=e.OSpage,l=1e4,y=[];case 5:if(!(o*r<=l)){t.next=17;break}for(d=e.ids.slice(o*r,o*r+r),m="",i=0;i<d.length;i++)0!==m.length&&(m+="&"),m+="token_ids="+d[i];return c={method:"GET",headers:{accept:"application/json","X-API-KEY":" "}},y.push(fetch("https://api.opensea.io/api/v1/assets?"+m+"&order_direction=desc&asset_contract_address="+e.contractId+"&limit=50&include_orders=true",c)),o++,e.OSpage=o,t.next=15,e.sleep(250);case 15:t.next=5;break;case 17:return t.next=19,Promise.all(y);case 19:return f=t.sent,t.next=22,Promise.all(f.map(function(){var e=Object(k.a)(regeneratorRuntime.mark((function e(t){var n,data;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,t.json();case 2:return n=e.sent,data=n.assets.map((function(e){return{id:e.token_id,price:e.seaport_sell_orders?e.seaport_sell_orders[0].current_price:null}})),e.abrupt("return",data);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()));case 22:n=t.sent,console.log("result"),console.log(n.flat()),e.loadingOS=!1,e.forSale=n.flat().filter((function(i){return null!=i.price}));case 27:case"end":return t.stop()}}),t)})))()},getContractInfo:function(){var e=this;return Object(k.a)(regeneratorRuntime.mark((function t(){var n,r;return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n=[],t.next=3,e.weaponContract.getStakingStatus(e.ids);case 3:r=t.sent,n=r.map((function(e){return{staked:e[1],id:e[0]}})),e.loadingContract=!1,e.staked=n.filter((function(i){return i.staked}));case 7:case"end":return t.stop()}}),t)})))()},getStakedForSale:function(){var e=this;this.stakedForSale=this.staked.filter((function(t){return e.forSale.filter((function(e){return t.id.toString()===e.id})).length>0})),this.loadingStakedForSale=!1},sleep:function(e){return Object(k.a)(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,new Promise((function(t){return setTimeout(t,e)}));case 2:case"end":return t.stop()}}),t)})))()}}},I=x,_=n(76),component=Object(_.a)(I,(function(){var e=this,t=e._self._c;return t(y.a,{attrs:{fluid:""}},[t("h1",[e._v("Staked weapons for sale")]),e._v(" "),t(v.a,[t(l.a,{attrs:{cols:"12",md:"4",sm:"4"}},[t(r.a,{staticClass:"mx-auto overflow-y-auto",attrs:{"max-width":"400","min-height":"200","max-height":"800",tile:""}},[t(o.c,[e._v("For sale ("+e._s(e.forSale.length)+")")]),e._v(" "),t(d.a,{attrs:{nav:"",dense:""}},e._l(e.forSale,(function(n){return t(m.a,{key:n.id},[t(c.a,[t(c.c,[e._v(e._s(n.id))])],1)],1)})),1),e._v(" "),e.loadingOS?t(f.a,{attrs:{absolute:"",color:"#036358"}},[e._v("\n        Page "+e._s(e.OSpage)+" / 334\n          "),t(T.a,{attrs:{indeterminate:"",size:"64"}})],1):e._e()],1)],1),e._v(" "),t(l.a,{attrs:{cols:"12",md:"4",sm:"4"}},[t(r.a,{staticClass:"mx-auto overflow-y-auto",attrs:{"max-width":"400","min-height":"200","max-height":"800",tile:""}},[t(o.c,[e._v("Staked ("+e._s(e.staked.length)+")")]),e._v(" "),t(d.a,{attrs:{nav:"",dense:""}},e._l(e.staked,(function(n){return t(m.a,{key:n.id},[t(c.a,[t(c.c,[e._v(e._s(n.id))])],1)],1)})),1),e._v(" "),e.loadingContract?t(f.a,{attrs:{absolute:"",color:"#036358"}},[t(T.a,{attrs:{indeterminate:"",size:"64"}})],1):e._e()],1)],1),e._v(" "),t(l.a,{attrs:{cols:"12",md:"4",sm:"4"}},[t(r.a,{staticClass:"mx-auto overflow-y-auto",attrs:{"max-width":"400","min-height":"200","max-height":"800",tile:""}},[t(o.c,[e._v("Staked for sale ("+e._s(e.stakedForSale.length)+")")]),e._v(" "),t(d.a,{attrs:{nav:"",dense:""}},e._l(e.stakedForSale,(function(n){return t(m.a,{key:n.id},[t(c.a,[t(c.c,[e._v(e._s(n.id))])],1)],1)})),1),e._v(" "),e.loadingStakedForSale?t(f.a,{attrs:{absolute:"",color:"#036358"}},[t(T.a,{attrs:{indeterminate:"",size:"64"}})],1):e._e()],1)],1)],1)],1)}),[],!1,null,"ca7d5d40",null);t.default=component.exports}}]);